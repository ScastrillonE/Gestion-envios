{%load static %}

<style>
body{
    color: black;
    font-family: arial, verdana, sans-serif;
    font-size: 10pt;
    background-color: #fff;

}

table th {
  text-align: left;
  background-color: #e2e2e2;
}


</style>

<div id="contenedor">
    <table width="40%">
        <TR>
            <td>
                <svg id="barcode"></svg>
            </td>
            <td>
                <img style="width:160px;" src="{% static 'img/logonk/logonk.png' %}"  alt="">

            </td>
        </TR>
    </table>

    <table width="40%" cellpadding="3" cellspacing="3" style="margin-top:0px;">
        <td style="border: 1px solid #e2e2e2">
            <b>Numero consecutivo: </b> {{shipping.consecutivo}} |
            <b>Numero de guia:</b> {{shipping.shipping_number}} |
            <b> Empresa de envio: </b> {{shipping.shipping_company.name}}
        </td>
    </table>
    <table width="40%" cellpadding="3" cellspacing="3">
        <tbody>
        <tr>
            <td style="border: 1px solid #e2e2e2;">
                <b>De:</b> {{company.name_company}}<br>
                <b>Direccion:</b> {{company.address}} <br>
                <b>Email:</b> {{company.email}}
                <b>Tel:</b> {{company.phone_number}}
                <b>Cel:</b> {{company.cel}}


            </td>
        </tr>
        <tr>

            <td style="border: 1px solid #e2e2e2">
                <b>Cliente:</b> {{shipping.customer}} <br>
                <b>Telefono:</b> {{shipping.c_phone}}
                <b>Celular:</b> {{shipping.c_cel}}
                <b>Direccion:</b> {{shipping.c_address}}
            </td>
        </tr>

        </tbody>
    </table>
    <table width="40%" cellpadding="3" cellspacing="3">
        <td style="border: 1px solid #e2e2e2">
            <b>Observaciones:</b> {{shipping.observations}}
        </td>
    </table>
    <table width="40%" cellpadding="3" cellspacing="3">
        <tr>
            <td style="border: 1px solid #e2e2e2;">
                <b>Origen:</b>
                Antioquia - Medell√≠n
            </td>
            <td align="center" style="border: 1px solid #e2e2e2;"><img style="height:60px;" src="{% static 'img/inst/Codqr.png' %}" alt="">
                <p style="margin:0px;">@nkninoska</p></td>
            <td style="border: 1px solid #e2e2e2">
                <b>Destino:</b> {{shipping.c_municipio}}
            </td>
        </tr>
    </table>
    <table width="40%" cellpadding="3" cellspacing="3">
        <tr>
            <td style="border: 1px solid #e2e2e2;">
                <img style="height:20px;" src="{% static 'img/facebook/facebook-app-logo.png' %}" alt="">
                NK Ninoska
            </td>
            <td align="right" style="border: 1px solid #e2e2e2;"><img style="height:30px;width:30px;" src="{% static 'img/inst/instagram-logo.png' %}" alt="">
            </td>
            <td style="border: 1px solid #e2e2e2;">
                <p style="margin-left:12px;margin-top:8px;">www.nkninoska.com</p>
            </td>
        </tr>
    </table>
</div>
<button id="btnCapturar">Download Pdf</button>


<script src="https://code.jquery.com/jquery-3.5.1.min.js"
        integrity="sha256-9/aliU8dGd2tb6OSsuzixeV4y/faTqgFtohetphbbj0=" crossorigin="anonymous"></script>

<script src="https://cdnjs.cloudflare.com/ajax/libs/jspdf/1.3.4/jspdf.debug.js"></script>
<script src="https://cdn.jsdelivr.net/npm/jsbarcode@3.11.0/dist/JsBarcode.all.min.js"></script>
<script type="text/javascript" src="https://cdn.jsdelivr.net/npm/html2canvas@1.0.0-rc.1/dist/html2canvas.min.js"></script>

<script>
    JsBarcode("#barcode", "{{shipping.consecutivo}}");
    const $boton = document.querySelector("#btnCapturar"),
    $objetivo = document.querySelector("#contenedor");

    $boton.addEventListener("click", () => {
      html2canvas($objetivo, {logging: true, letterRendering: 1, useCORS: true} )
        .then(canvas => {
            var imgData = canvas.toDataURL('image/png');
            // console.log(imgData);
            var doc = new jsPDF('p', 'mm');

            doc.addImage(imgData, 'PNG', 0, 0, 310, 100);
            doc.save('envio.pdf');
        });
    });


</script>